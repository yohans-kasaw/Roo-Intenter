<extraction_workflow>
  <overview>
    Extract raw facts from a codebase about a feature or aspect.
    Output is structured data for documentation teams to use.
    Do NOT write documentation. Do NOT format prose. Do NOT make structure decisions.
  </overview>

  <process>
    <step number="1">
      <title>Identify Target</title>
      <actions>
        <action>Parse the user's request to identify the feature/aspect</action>
        <action>Clarify scope if ambiguous (ask one question max)</action>
      </actions>
    </step>

    <step number="2">
      <title>Discover Code</title>
      <actions>
        <action>Use codebase_search to find relevant files</action>
        <action>Identify entry points, components, and related code</action>
        <action>Map the boundaries of the feature</action>
      </actions>
    </step>

    <step number="3">
      <title>Extract Facts</title>
      <actions>
        <action>Read code and extract facts into categories (see fact_categories)</action>
        <action>Record file paths as sources for each fact</action>
        <action>Do NOT interpret, summarize, or explain - just extract</action>
      </actions>
    </step>

    <step number="4">
      <title>Output Structured Data</title>
      <actions>
        <action>Write extraction to .roo/extraction/EXTRACT-[feature].yaml</action>
        <action>Use the output schema (see output_format.xml)</action>
      </actions>
    </step>
  </process>

  <fact_categories>
    <category name="identity">
      <extracts>
        <extract>Feature name as it appears in code</extract>
        <extract>File paths where feature is implemented</extract>
        <extract>Entry points (commands, UI elements, API endpoints)</extract>
      </extracts>
    </category>

    <category name="behavior">
      <extracts>
        <extract>What the feature does (from code logic)</extract>
        <extract>Inputs it accepts</extract>
        <extract>Outputs it produces</extract>
        <extract>Side effects (files created, state changed, etc.)</extract>
      </extracts>
    </category>

    <category name="configuration">
      <extracts>
        <extract>Settings/options that affect behavior</extract>
        <extract>Default values</extract>
        <extract>Valid ranges or allowed values</extract>
        <extract>Where configured (settings file, env var, UI)</extract>
      </extracts>
    </category>

    <category name="constraints">
      <extracts>
        <extract>Prerequisites and dependencies</extract>
        <extract>Limitations (what it cannot do)</extract>
        <extract>Permissions required</extract>
        <extract>Compatibility requirements</extract>
      </extracts>
    </category>

    <category name="errors">
      <extracts>
        <extract>Error conditions in code</extract>
        <extract>Error messages (exact text)</extract>
        <extract>Recovery paths in code</extract>
      </extracts>
    </category>

    <category name="ui">
      <extracts>
        <extract>UI components involved</extract>
        <extract>User-visible labels and text</extract>
        <extract>Interaction patterns</extract>
      </extracts>
    </category>

    <category name="integration">
      <extracts>
        <extract>Other features this interacts with</extract>
        <extract>External APIs or services called</extract>
        <extract>Events emitted or consumed</extract>
      </extracts>
    </category>
  </fact_categories>

  <rules>
    <rule>Extract facts, not opinions</rule>
    <rule>Include source file paths for every fact</rule>
    <rule>Use code identifiers and exact strings from source</rule>
    <rule>Do NOT paraphrase - quote when possible</rule>
    <rule>Do NOT decide what's important - extract everything relevant</rule>
    <rule>Do NOT format for end users - output is for docs team</rule>
  </rules>
</extraction_workflow>